!function(t,e){"use strict";function o(t){throw new Error(n.text.prefix+"Error: "+t)}!function(){function o(){throw new Error("Animation Searcher Error: Your Browser is too old, time to change! :)")}if(!e)throw new Error("Animation Searcher Error: Please make sure Angular.JS is loaded Correctly.");var n=(t.navigator.userAgent,/MSIE [1-8].*]/i);n.match(n)?o():0}();var n={text:{prefix:"Animation Searcher "},site:{caso:{name:"华盟",codeName:"caso",fullName:"China Animation Subtitle Organization",url:"https://camoe.org",icon:"http://tp4.sinaimg.cn/1843885343/180/1290319229/0",disabled:!1},ktxp:{name:"极影",codeName:"ktxp",fullName:"Katong XP",url:"http://bt.ktxp.org",icon:"http://tp4.sinaimg.cn/3808818207/180/5680524263/0",disabled:!1},popgo:{name:"漫游",codeName:"popgo",fullName:"Popgo",url:"http://share.popgo.com",icon:"http://tp1.sinaimg.cn/2661910672/180/5727241391/0",disabled:!1},dmhy:{name:"动漫花园",codeName:"dmhy",fullName:"DongMan HuaYuan",url:"http://share.dmhy.org",icon:"http://tp2.sinaimg.cn/1926582581/180/22817929400/0",disabled:!1}},toast:{position:{top:!0,bottom:!1,left:!1,right:!0}}},i=(e.module("ngApp",["ngAnimate","ngMaterial","ngSanitize","ngRoute","ngAppCtrls","ngAppDirectives","ngAppToastCtrl"]),e.module("ngAppCtrls",[]));i.config(["$compileProvider",function(t){t.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|magnet):/)}]);var r=e.module("ngDirectives",[]),a=e.module("ngAppToastCtrl",["ngMaterial"]);a.controller("ToastCtrl",["$scope","$rootScope","$mdToast","$animate",function(t,e,o,i){e.toast={};var r=e.toast;r.toastPosition=n.toast.position,r.getToastPosition=function(){return Object.keys(r.toastPosition).filter(function(t){return r.toastPosition[t]}).join(" ")},r.showSimpleToast=function(){o.show(o.simple().content(toastContent).position(e.toast.getToastPosition()).hideDelay(5e3))},r.showActionToast=function(t){t=t||function(){};var n=o.simple().content(toastContent).action(toastAction).highlightAction(!1).position(e.toast.getToastPosition());o.show(n).then(t)},r.closeToast=function(){o.hide()}}]),i.controller("mainController",["$scope","$rootScope",function(t,e){t.progressStatus={},function(){Object.keys(n.site).filter(function(e){t.progressStatus[e]=!1})}(),t.searchResult={}}]),r.directive("searchModule",function(){return{restrict:"E",scope:!0,controller:function(t,e,o,n){t.rootScope=$rootScope},link:function(t,e,o){var i=t.rootScope;t.keyword=null,t.searchExec=function(){Object.keys(n.site).filter(function(e){$http.post("/search/"+n.site[e].codeName,{keyword:t.keyword}).success(function(t,o,n,r){$scope.searchResult[e]=t.result,i.toast.showSimpleToast(t.info)}).error(function(t,e,o,n){i.toast.showActionToast(t.info,t.action)})})}}}}),r.directive("siteSwitcher",function(){return{restrict:"E",scope:!0,replace:!0,templateUrl:"/templates/ng-site-switcher.html",controller:function(t,e,n){t.panelSwitch=function(t){t?void 0:o('Please provide param "codeName" while calling this function.')}},link:function(t,e,o){t.switcherList=n.site,Object.keys(t.switcherList).filter(function(e){t.switcherList[e].title="切换至"+t.switcherList[e].name+"的搜索结果"})}}}),r.directive("resultPanel",function(){return{restrict:"E",scope:!0,templateUrl:"/templates/ng-result-panel.html",controller:function(t,e,i,r,a,s){i.codename?void 0:o('Attribute "codename" must be defined.');var c=i.codename;t.domInfo={codeName:c,name:n.site[c].name,fullName:n.site[c].fullName,icon:n.site[c].icon,disabled:n.site[c].disabled},t.result=t.searchResult},link:function(t,e,n){n.codename?void 0:o('Attribute "codename" must be defined.')}}})}(window,window.angular),function(t,e){function o(){var t=e("#searchable-sites-list");t.mCustomScrollbar({theme:"dark",axis:"y",autoHideScrollbar:!0,scrollButtons:{enable:!1},mouseWheel:{scrollAmount:300},advanced:{updateOnContentResize:!0}})}function n(){e(".body-merge").addClass("loaded")}e(window).on("load",function(){o(),n()})}(window,window.jQuery);