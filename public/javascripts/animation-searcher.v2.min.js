!function(t,e){function n(){throw t.location.href="/old-browser",new Error("Animation Searcher Error: Your Browser is too old, time to change! :)")}if(!angular)throw new Error("Animation Searcher Error: Please make sure Angular.JS is loaded Correctly.");var o=t.navigator.userAgent,r=/MSIE [1-8].*]/i;o.match(r)?n():void 0}(window),function(){"use strict";var t=angular.module("appConfig",[]);t.value("appConfig",{text:{prefix:"Animation Searcher "},site:{caso:{name:"华盟",codeName:"caso",fullName:"China Animation Subtitle Organization",url:"https://camoe.org",icon:"http://tp4.sinaimg.cn/1843885343/180/1290319229/0",disabled:!1},ktxp:{name:"极影",codeName:"ktxp",fullName:"Katong XP",url:"http://bt.ktxp.org",icon:"http://tp4.sinaimg.cn/3808818207/180/5680524263/0",disabled:!1},popgo:{name:"漫游",codeName:"popgo",fullName:"Popgo",url:"http://share.popgo.com",icon:"http://tp1.sinaimg.cn/2661910672/180/5727241391/0",disabled:!1},dmhy:{name:"动漫花园",codeName:"dmhy",fullName:"DongMan HuaYuan",url:"https://share.dmhy.org",icon:"http://tp2.sinaimg.cn/1926582581/180/22817929400/0",disabled:!1}},toast:{position:{top:!0,bottom:!1,left:!1,right:!0}},settings:{xhrTimeout:3e4}})}(),function(){"use strict";var t=angular.module("ngApp",["ngAnimate","ngMaterial","ngSanitize","ngRoute","appConfig","internalFunc","ngAppCtrls","ngAppDirectives","ngAppService","colorThief"]);t.config(["$compileProvider",function(t){t.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|magnet):/)}]),t.run(["$timeout","$splashScreen","$colorChange","$colorThief",function(t,e,n,o){angular.element(window).on("load",function(){var r=document.querySelector("#greeting-background"),a=o.getThemeColor(r);t(function(){e.hide()},3e3),t(function(){n.change(a)},1e3)})}])}(),function(){function t(t,e,n){1===arguments.length&&(e=t.g,n=t.b,t=t.r);var o,r=Math.max(t,e,n),a=Math.min(t,e,n),i=r-a,c=0===r?0:i/r,s=r/255;switch(r){case a:o=0;break;case t:o=e-n+i*(n>e?6:0),o/=6*i;break;case e:o=n-t+2*i,o/=6*i;break;case n:o=t-e+4*i,o/=6*i}return[o,c,s]}function e(t,e,n){var o,r,a,i,c,s,l,u;switch(1===arguments.length&&(e=t.s,n=t.v,t=t.h),i=Math.floor(6*t),c=6*t-i,s=n*(1-e),l=n*(1-c*e),u=n*(1-(1-c)*e),i%6){case 0:o=n,r=u,a=s;break;case 1:o=l,r=n,a=s;break;case 2:o=s,r=n,a=u;break;case 3:o=s,r=l,a=n;break;case 4:o=u,r=s,a=n;break;case 5:o=n,r=s,a=l}return[Math.round(255*o),Math.round(255*r),Math.round(255*a)]}var n=angular.module("colorThief",[]);n.factory("$colorThief",function(){var n=function(t){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.width=this.canvas.width=t.width,this.height=this.canvas.height=t.height,this.context.drawImage(t,0,0,this.width,this.height)};n.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},n.prototype.update=function(t){this.context.putImageData(t,0,0)},n.prototype.getPixelCount=function(){return this.width*this.height},n.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)},n.prototype.removeCanvas=function(){this.canvas.parentNode.removeChild(this.canvas)};var o=function(){};if(o.prototype.getColor=function(t,e){var n=this.getPalette(t,5,e);return"rgb("+n[0][0]+", "+n[0][1]+", "+n[0][2]+")"},o.prototype.getThemeColor=function(n,r){var a=this.getPalette(n,5,r),i={r:a[0][0],g:a[0][1],b:a[0][2]},c=t(i.r,i.g,i.b),s=[];return c[2]>.75&&c[2]<=.85?(c[2]=.75,c[1]+=.15,console.log("Animation Searcher Info: The dominant color is too bright, and it has been adjusted."),s=e(c[0],c[1],c[2])):c[2]>.85?(s=o.prototype.getDarkestColor(n,r),console.log("Animation Searcher Info: The dominant color is too bright, so the darkest color has been set.")):s=e(c[0],c[1],c[2]),"rgb("+s[0]+", "+s[1]+", "+s[2]+")"},o.prototype.getDarkestColor=function(t,e){var n=this.getPalette(t,5,e),o=765,r=null;return Object.keys(n).filter(function(t){var e=n[t][0]+n[t][1]+n[t][2];o>e&&(o=e,r=[n[t][0],n[t][1],n[t][2]])}),r},o.prototype.getPalette=function(t,e,o){"undefined"==typeof e&&(e=10),("undefined"==typeof o||1>o)&&(o=10);for(var r,i,c,s,l,u=new n(t),f=u.getImageData(),h=f.data,p=u.getPixelCount(),d=[],g=0;p>g;g+=o)r=4*g,i=h[r+0],c=h[r+1],s=h[r+2],l=h[r+3],l>=125&&(i>250&&c>250&&s>250||d.push([i,c,s]));var m=a.quantize(d,e),v=m?m.palette():null;return u.removeCanvas(),v},!r)var r={map:function(t,e){var n={};return e?t.map(function(t,o){return n.index=o,e.call(n,t)}):t.slice()},naturalOrder:function(t,e){return e>t?-1:t>e?1:0},sum:function(t,e){var n={};return t.reduce(e?function(t,o,r){return n.index=r,t+e.call(n,o)}:function(t,e){return t+e},0)},max:function(t,e){return Math.max.apply(null,e?r.map(t,e):t)}};var a=function(){function t(t,e,n){return(t<<2*l)+(e<<l)+n}function e(t){function e(){n.sort(t),o=!0}var n=[],o=!1;return{push:function(t){n.push(t),o=!1},peek:function(t){return o||e(),void 0===t&&(t=n.length-1),n[t]},pop:function(){return o||e(),n.pop()},size:function(){return n.length},map:function(t){return n.map(t)},debug:function(){return o||e(),n}}}function n(t,e,n,o,r,a,i){var c=this;c.r1=t,c.r2=e,c.g1=n,c.g2=o,c.b1=r,c.b2=a,c.histo=i}function o(){this.vboxes=new e(function(t,e){return r.naturalOrder(t.vbox.count()*t.vbox.volume(),e.vbox.count()*e.vbox.volume())})}function a(e){var n,o,r,a,i=1<<3*l,c=new Array(i);return e.forEach(function(e){o=e[0]>>u,r=e[1]>>u,a=e[2]>>u,n=t(o,r,a),c[n]=(c[n]||0)+1}),c}function i(t,e){var o,r,a,i=1e6,c=0,s=1e6,l=0,f=1e6,h=0;return t.forEach(function(t){o=t[0]>>u,r=t[1]>>u,a=t[2]>>u,i>o?i=o:o>c&&(c=o),s>r?s=r:r>l&&(l=r),f>a?f=a:a>h&&(h=a)}),new n(i,c,s,l,f,h,e)}function c(e,n){function o(t){var e,o,r,a,i,c=t+"1",s=t+"2",u=0;for(l=n[c];l<=n[s];l++)if(g[l]>d/2){for(r=n.copy(),a=n.copy(),e=l-n[c],o=n[s]-l,i=o>=e?Math.min(n[s]-1,~~(l+o/2)):Math.max(n[c],~~(l-1-e/2));!g[i];)i++;for(u=m[i];!u&&g[i-1];)u=m[--i];return r[s]=i,a[c]=r[s]+1,[r,a]}}if(n.count()){var a=n.r2-n.r1+1,i=n.g2-n.g1+1,c=n.b2-n.b1+1,s=r.max([a,i,c]);if(1==n.count())return[n.copy()];var l,u,f,h,p,d=0,g=[],m=[];if(s==a)for(l=n.r1;l<=n.r2;l++){for(h=0,u=n.g1;u<=n.g2;u++)for(f=n.b1;f<=n.b2;f++)p=t(l,u,f),h+=e[p]||0;d+=h,g[l]=d}else if(s==i)for(l=n.g1;l<=n.g2;l++){for(h=0,u=n.r1;u<=n.r2;u++)for(f=n.b1;f<=n.b2;f++)p=t(u,l,f),h+=e[p]||0;d+=h,g[l]=d}else for(l=n.b1;l<=n.b2;l++){for(h=0,u=n.r1;u<=n.r2;u++)for(f=n.g1;f<=n.g2;f++)p=t(u,f,l),h+=e[p]||0;d+=h,g[l]=d}return g.forEach(function(t,e){m[e]=d-t}),o(s==a?"r":s==i?"g":"b")}}function s(t,n){function s(t,e){for(var n,o=1,r=0;f>r;)if(n=t.pop(),n.count()){var a=c(l,n),i=a[0],s=a[1];if(!i)return;if(t.push(i),s&&(t.push(s),o++),o>=e)return;if(r++>f)return}else t.push(n),r++}if(!t.length||2>n||n>256)return!1;var l=a(t),u=0;l.forEach(function(){u++});var p=i(t,l),d=new e(function(t,e){return r.naturalOrder(t.count(),e.count())});d.push(p),s(d,h*n);for(var g=new e(function(t,e){return r.naturalOrder(t.count()*t.volume(),e.count()*e.volume())});d.size();)g.push(d.pop());s(g,n-g.size());for(var m=new o;g.size();)m.push(g.pop());return m}var l=5,u=8-l,f=1e3,h=.75;return n.prototype={volume:function(t){var e=this;return(!e._volume||t)&&(e._volume=(e.r2-e.r1+1)*(e.g2-e.g1+1)*(e.b2-e.b1+1)),e._volume},count:function(e){var n=this,o=n.histo;if(!n._count_set||e){var r,a,i,c=0;for(r=n.r1;r<=n.r2;r++)for(a=n.g1;a<=n.g2;a++)for(i=n.b1;i<=n.b2;i++)index=t(r,a,i),c+=o[index]||0;n._count=c,n._count_set=!0}return n._count},copy:function(){var t=this;return new n(t.r1,t.r2,t.g1,t.g2,t.b1,t.b2,t.histo)},avg:function(e){var n=this,o=n.histo;if(!n._avg||e){var r,a,i,c,s,u=0,f=1<<8-l,h=0,p=0,d=0;for(a=n.r1;a<=n.r2;a++)for(i=n.g1;i<=n.g2;i++)for(c=n.b1;c<=n.b2;c++)s=t(a,i,c),r=o[s]||0,u+=r,h+=r*(a+.5)*f,p+=r*(i+.5)*f,d+=r*(c+.5)*f;u?n._avg=[~~(h/u),~~(p/u),~~(d/u)]:n._avg=[~~(f*(n.r1+n.r2+1)/2),~~(f*(n.g1+n.g2+1)/2),~~(f*(n.b1+n.b2+1)/2)]}return n._avg},contains:function(t){var e=this,n=t[0]>>u;return gval=t[1]>>u,bval=t[2]>>u,n>=e.r1&&n<=e.r2&&gval>=e.g1&&gval<=e.g2&&bval>=e.b1&&bval<=e.b2}},o.prototype={push:function(t){this.vboxes.push({vbox:t,color:t.avg()})},palette:function(){return this.vboxes.map(function(t){return t.color})},size:function(){return this.vboxes.size()},map:function(t){for(var e=this.vboxes,n=0;n<e.size();n++)if(e.peek(n).vbox.contains(t))return e.peek(n).color;return this.nearest(t)},nearest:function(t){for(var e,n,o,r=this.vboxes,a=0;a<r.size();a++)n=Math.sqrt(Math.pow(t[0]-r.peek(a).color[0],2)+Math.pow(t[1]-r.peek(a).color[1],2)+Math.pow(t[2]-r.peek(a).color[2],2)),(e>n||void 0===e)&&(e=n,o=r.peek(a).color);return o},forcebw:function(){var t=this.vboxes;t.sort(function(t,e){return r.naturalOrder(r.sum(t.color),r.sum(e.color))});var e=t[0].color;e[0]<5&&e[1]<5&&e[2]<5&&(t[0].color=[0,0,0]);var n=t.length-1,o=t[n].color;o[0]>251&&o[1]>251&&o[2]>251&&(t[n].color=[255,255,255])}},{quantize:s}}();return new o})}(),function(){"use strict";var t=angular.module("ngAppCtrls",[]);t.controller("mainController",["$scope","$rootScope","$location","$timeout","appConfig","$splashLayout",function(t,e,n,o,r,a){t.blurButton="hide",t.historyPanel=!1,t.layout="init-layout",t.$on("splashLayout",function(e,n){t.layout=n}),t.$on("splashScreen",function(e,n){o(function(){t.backgroundBlur="blur",o(function(){t.blurButton="show"},5e3)},4e3)}),t.toggleBlur=function(){"blur"===t.backgroundBlur?t.backgroundBlur="":t.backgroundBlur="blur"},t.$on("historyPanel",function(e,n){"show"===n?t.historyPanel=!0:t.historyPanel=!1}),t.progressStatus={},function(){Object.keys(r.site).filter(function(e){t.progressStatus[e]=!1})}(),t.searchResult={}}]),t.controller("searchController",["$scope","$historyPanel",function(t,e){function n(){e.show()}function o(){e.hide()}function r(t){console.log(t)}t.searchBarFocus=n,t.searchBarBlur=o,t.searchBarKeyup=r}]),t.controller("leftNavButtonCtrl",["$scope","$http","$toast","$leftNav","$charMsg","$localStorage",function(t,e,n,o,r,a){t.clearHistory=function(){a.empty()}}]),t.controller("splashScreenController",["$scope",function(t){t.status=null,t.$on("splashScreen",function(e,n){t.status=n})}]),t.controller("serviceModules",["$scope",function(t){}])}(),function(){"use strict";var t=angular.module("ngAppDirectives",[]);t.directive("actionBar",function(){return{restrict:"E",scope:{},controller:function(t,e,n){},link:function(t,e,n){}}}),t.directive("leftnavMenu",["$leftNav",function(t){return{restrict:"E",scope:!0,controller:function(t,e,n){},link:function(e,n,o){e.toggle=t.toggle}}}]),t.directive("searchBar",["$http","$toast","$search",function(t,e,n){return{restrict:"E",scope:!0,controller:function(t,e,n){},link:function(t,e,o){t.keywords=null,t.searchExec=function(e){return"keyup"===e.type&&13!==e.keyCode?!1:void n.search(t.keywords)}}}}]),t.directive("siteSwitcher",["appConfig",function(t){return{restrict:"E",scope:!0,replace:!0,templateUrl:"/templates/ng-site-switcher.html",controller:function(t,e,n){t.panelSwitch=function(t){t?void 0:throwError('Please provide param "codeName" while calling this function.')}},link:function(e,n,o){e.switcherList=t.site,Object.keys(e.switcherList).filter(function(t){e.switcherList[t].title="切换至"+e.switcherList[t].name+"的搜索结果"})}}}]),t.directive("resultPanel",["$compile","$sce","appConfig",function(t,e,n){return{restrict:"E",scope:!0,templateUrl:"/templates/ng-result-panel.html",controller:function(t,e,n){},link:function(t,e,o){o.codename?void 0:throwError('Attribute "codename" must be defined.');var r=o.codename;t.domInfo={codeName:r,name:n.site[r].name,fullName:n.site[r].fullName,icon:n.site[r].icon,disabled:n.site[r].disabled},t.$on("searchResult",function(e,n){return n[r]?void(t.results=n[r]):!1}),t.switchPage=function(t){}}}}]),t.directive("textPanel",["$compile","$timeout","$window","$toast","$clearMDToast",function(t,e,n,o,r){return{restrict:"E",controller:["$scope","$element","$attrs",function(t,e,n){}],link:function(a,i,c){function s(c){c.content?void 0:o.showSimpleToast("Caution: No content provided.");var s='<div class="main-container w-100 h-100 p-absolute p-zero bk-merge md-whiteframe-4dp" style="z-index: 10000"><div class="content-container p-relative"><h2 class="title color-theme bk-color">'+c.title+'</h2><md-button class="md-icon-button close-btn transition-dot-4" style="margin-top: .5em;" ng-click="closePanel()" aria-label="Close this panel."><md-tooltip>关闭面板</md-tooltip><i class="icon-cancel"></i></md-button><div class="content">'+c.content+"</div></div></div>";i.append(t(s)(a)),a.panelStatus="in",a.closePanel=function(){c.backward?n.history.back():void 0,a.panelStatus="out",e(function(){angular.element(i).empty(),r()},600)}}a.closePanel=null,a.panelStatus="out",a.$on("textPanelCreated",function(t,e){s(e)})}}}]),t.directive("history",["$localStorage",function(t){return{restrict:"E",scope:!0,controller:function(t,e,n){},link:function(t,e,n){}}}])}(),function(){"use strict";var t=angular.module("internalFunc",[]);t.factory("$internalFunc",["$interval","$window","appConfig",function(t,e,n){function o(t){throw new Error(n.text.prefix+"Error: "+t)}function r(t,e,r,a,i){switch(t&&e||o('Argument "$toast" or "type" is not provided in $toastErr.'),r||console.log(n.text.prefix+"Caution: No toast content provided."),r=r||"（木有提供提示消息~）",i=i||void 0,e){case"simple":t.showSimpleToast(r);break;case"action":a?void 0:o('Please provide parama "action" when calling '+i),t.showActionToast(r,a,i)}}function a(t,e,n,a){r(t,"action",e,n,function(){o(a)})}function i(n,o){i.isRunning=!1,i.isRunning=!0,n.style.backgroundPositionX=o.startPosition+"px";var r=1,a=function(){return r>o.step?(void 0!=o.endPosition?n.style.backgroundPositionX=o.endPosition+"px":void 0,e.navigator.userAgent.indexOf("Firefox")>-1&&(void 0!=o.endPosition?n.style.backgroundPosition=o.endPosition+"px 0":void 0),t.cancel(c),void(i.isRunning=!1)):(n.style.backgroundPositionX=o.startPosition+o.width*r+"px",e.navigator.userAgent.indexOf("Firefox")>-1&&(n.style.backgroundPosition=o.startPosition+o.width*r+"px 0"),void r++)},c=t(a,o.interval)}function c(t,e){return!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function s(t,e){c(t,e)||(t.className+=" "+e)}function l(t,e){c(t,e)&&(t.className=t.className.replace(new RegExp("(\\s|^)"+e+"(\\s|$)")," "))}function u(t,e){t.className=e}function f(t,e){return t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e),t}return{throwError:o,toastFunc:r,toastErr:a,imageAnimationX:i,hasClass:c,addClass:s,removeClass:l,setClass:u,prependChild:f}}])}(),function(){"use strict";var t=angular.module("ngApp");t.config(["$routeProvider",function(t){t.when("/change-log",{template:"",controller:["$changeLog",function(t){t.show()}]}).when("/welcome",{template:"",controller:["$splashLayout",function(t){t.toInitLayout()}]}).when("/stand-by",{template:"",controller:["$splashLayout",function(t){t.toStandByLayout()}]}).when("/side-nav-open",{template:"",controller:["$leftNav","$splashLayout",function(t,e){t.open(),e.toStandByLayout()}]}).when("/powered-by",{template:"",controller:["$charMsg",function(t){t.show("Powered By ...","This site is powered by Angular.JS, Node.JS, Nginx @ Aliyun.")}]}).when("/",{template:"",controller:["$leftNav",function(t){t.close()}]}).otherwise({redirectTo:"/"})}]).config(["$locationProvider",function(t){t.html5Mode({enabled:!0})}])}(),function(t,e){"use strict";angular.module("ngAppService",["appToast","charMsg","leftNav","colorChange","localStorage","splashLayout","splashScreen","changeLog","textPanel","clearMdToast","historyPanel","searchService"]);var n=angular.module("appToast",[]);n.factory("$toast",["$mdToast","appConfig",function(t,e){var n={};return n.toastPosition=e.toast.position,n.getToastPosition=function(){return Object.keys(n.toastPosition).filter(function(t){return n.toastPosition[t]}).join(" ")},n.showSimpleToast=function(e){t.show(t.simple().content(e).position(n.getToastPosition()).hideDelay(5e3))},n.showActionToast=function(e,o,r){r=r||function(){};var a=t.simple().content(e).action(o).highlightAction(!1).position(n.getToastPosition());t.show(a).then(r)},n.closeToast=function(){t.hide()},n}]);var o=angular.module("charMsg",[]);o.factory("$charMsg",["$timeout","$window","$internalFunc",function(t,e,n){var o=angular.element(document.querySelector("body")),r=!1,a=null,i=null,c={create:function(e,i,s){if(i||n.throwError('param "content" must be provided when calling "$charMsg.show()".'),a&&n.throwError("\n\n Character Message Panel has been created, can't create anymore, so stop calling me before remove it! （╯－＿－）╯╧╧ \n"),!r){r=!0,a=document.createElement("char-msg"),a.className="char-msg";var l=document.createElement("div");switch(l.className="char-msg-container",s=s||"left"){case"left":n.addClass(a,"left");break;case"right":n.addClass(a,"right")}if(e){var u=document.createElement("h2");u.className="char-msg-title",u.innerHTML=e,l.appendChild(u)}var f=document.createElement("div");f.className="char-msg-content",f.innerHTML=i,l.appendChild(f);var h=document.createElement("button");h.className="char-msg-close-btn",h.onclick=c.remove;var p=document.createElement("i");p.className="icon-cancel",h.appendChild(p),l.appendChild(h),a.appendChild(l),o.append(a),t(function(){r=!1},500)}},remove:function(){n.addClass(a,"out-animation"),e.history.back(),i=t(function(){a.parentNode.removeChild(a),a=null},500)}};return{show:c.create,hide:c.remove}}]);var r=angular.module("localStorage",[]);r.factory("$localStorage",["$toast","$internalFunc","appConfig",function(e,n,o){function r(e,o){e&&o||n.throwError('Params must be provided when calling "$localStorage.setItem()"!  (╯‵□′)╯︵┻━┻'),"[object String]"!==Object.prototype.toString.call(e)&&n.throwError('$localStorage.setItem(): Param "key" must be String.'),t.localStorage.setItem(e,o)}function a(e){return e&&"[object String]"===Object.prototype.toString.call(e)||n.throwError('$localStorage.getItem(): Params "key" is invalid, take a look.'),t.localStorage.getItem(e)}function i(e){e&&"[object String]"===Object.prototype.toString.call(e)||n.throwError('$localStorage.removeItem(): Params "key" is invalid, take a look.'),t.localStorage.removeItem(e)}function c(){Object.keys(t.localStorage).filter(function(t){i(t)}),e.showSimpleToast("搜索历史已成功清空!  (●'◡'●)ﾉ♥"),console.log(o.text.prefix+"Info:\nAll items in Local Storage has been removed at "+new Date(Date.now())+".")}return{setItem:r,getItem:a,removeItem:i,empty:c}}]);var a=angular.module("leftNav",[]);a.factory("$leftNav",["$timeout","$mdSidenav","$location","$internalFunc",function(e,n,o,r){function a(t){27===t.keyCode&&(u(),s())}function i(){h.unbind("keyup",a)}function c(){n("leftside").toggle().then(function(){}),e(function(){var t=angular.element(document.querySelector("md-backdrop"));t.unbind(),e(function(){t.bind("click",f)},400),n("leftside").isOpen()&&h.bind("keyup",a)},1)}function s(){n("leftside").close(),u("close")}function l(){n("leftside").isOpen()||(c(),u("open"),e(function(){var t=angular.element(document.querySelector("md-backdrop"));t.removeClass("ng-enter")},1))}function u(t){var e=document.getElementById("left-nav-menu"),n={toArrow:function(){var t={startPosition:0,width:27.75,step:16,interval:17};r.imageAnimationX(e,t),e.setAttribute("data-status","arrow"),o.path("/side-nav-open")},toMenu:function(){var t={startPosition:444,endPosition:0,width:27.75,step:16,interval:17};r.imageAnimationX(e,t),e.setAttribute("data-status","menu"),i(),o.path("/")}},a=e.getAttribute("data-status");if(t)switch(t){case"open":if("arrow"===a)return;n.toArrow();break;case"close":if("menu"===a)return;n.toMenu()}else switch(a){case"menu":n.toArrow();break;case"arrow":n.toMenu()}}function f(){return r.imageAnimationX.isRunning?!1:(c(),void u())}var h=angular.element(t);return{toggle:f,open:l,close:s}}]);var i=angular.module("colorChange",[]);i.factory("$colorChange",function(){function t(t){var e=".color-theme.bk-color {background-color:"+t+"}.color-theme.text-color {color:"+t+" !important}";n.html(e)}var e=document.getElementById("color-change"),n=angular.element(e);return{change:t}});var c=angular.module("splashLayout",[]);c.factory("$splashLayout",["$rootScope",function(t){function e(){t.$broadcast("splashLayout","init-layout")}function n(){t.$broadcast("splashLayout","stand-by-layout")}return{toInitLayout:e,toStandByLayout:n}}]);var s=angular.module("changeLog",[]);s.factory("$changeLog",["$http","$splashLayout","$leftNav","$toast","$internalFunc","$textPanel",function(t,e,n,o,r,a){function i(){t.post("/change-log").then(function(t){a.show({title:"更新日志 <small>Change Log.</small>",content:t.data.content,backward:!0})},function(t){r.toastErr(o,"更新日志获取失败, 过一会再试试?","(/= _ =)/~┴┴","Request for Change Log failed.")})}return{show:i}}]);var l=angular.module("textPanel",[]);l.factory("$textPanel",["$rootScope",function(t){function e(){console.log("$textPanel Service: \n--- This is a invincible divider. ---"),console.log(' - $textPanel.show(config): Create a text panel and fill it with "config.content".'),console.log(" - $textPanel.help(): Here comes the help you loser! \n")}function n(e){e=e||"",t.$broadcast("textPanelCreated",e)}return{show:n,help:e}}]);var u=angular.module("clearMdToast",[]);u.factory("$clearMDToast",function(){return function(){angular.element(document.querySelector(".md-content")).remove()}});var f=angular.module("splashScreen",[]);f.factory("$splashScreen",["$rootScope",function(t){function e(){t.$broadcast("splashScreen",arguments[0])}return{show:e.bind(0,"show"),hide:e.bind(0,"hide")}}]);var h=angular.module("historyPanel",[]);h.factory("$historyPanel",["$rootScope",function(t){function e(){t.$broadcast("historyPanel",arguments[0])}return{show:e.bind(0,"show"),hide:e.bind(0,"hide")}}]);var p=angular.module("searchService",[]);p.factory("$search",["$rootScope","$http","$toast","appConfig",function(t,e,n,o){function r(r){Object.keys(o.site).filter(function(a){e.post("/search/"+o.site[a].codeName,{keywords:r},{timeout:o.settings.xhrTimeout}).success(function(e,o,r,a,i){t.$broadcast("searchResult",e),n.showSimpleToast(e.info)}).error(function(t,e,o,r,a){-1===e?n.showActionToast("您的搜索请求超时，不兹道四哪里粗了问题 ... ＞︿＜","我知道了~"):n.showActionToast(t.info,t.action)})})}function a(r,a){e.post("/search/"+r,{mode:"switchPage",link:a},{timeout:o.settings.xhrTimeout}).success(function(e,o,r,a,i){t.$broadcast("searchResult",e),n.showSimpleToast(e.info)}).error(function(t,e,o,r,a){-1===e?n.showActionToast("您的搜索请求超时，不兹道四哪里粗了问题 ... ＞︿＜","我知道了~"):n.showActionToast(t.info,t.action)})}return{search:r,changePage:a}}])}(window),function(t,e,n){function o(){if(!t.io)throw new Error(r+"Error: Socket.io isn't loaded yet, scripts has been stoped.");var e=t.io();e.on("greeting",function(t){console.log(r+"Info: WebSocket from now on. :)"),e.emit("thank-you-sir",{info:"啊♂啊♂Thank♂You♂Sir"})})}var r="Animation Searcher ";e.element(window).on("load",o)}(window,window.angular);